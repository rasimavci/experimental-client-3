webpackJsonp([2],{202:function(e,t,i){function n(e){i(383)}var a=i(30)(i(292),i(404),n,"data-v-731b8886",null);e.exports=a.exports},278:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(20),a=i.n(n),r=i(87),s=i.n(r),o=i(294),l=i.n(o);t.default={name:"picture-input",props:{width:{type:[String,Number],default:l.a},height:{type:[String,Number],default:l.a},margin:{type:[String,Number],default:0},accept:{type:String,default:"image/*"},size:{type:[String,Number],default:l.a},name:{type:String,default:null},id:{type:[String,Number],default:null},buttonClass:{type:String,default:"btn btn-primary button"},removeButtonClass:{type:String,default:"btn btn-secondary button secondary"},aspectButtonClass:{type:String,default:"btn btn-secondary button secondary"},prefill:{type:[String,File],default:""},prefillOptions:{type:Object,default:function(){return{}}},crop:{type:Boolean,default:!0},radius:{type:[String,Number],default:0},removable:{type:Boolean,default:!1},hideChangeButton:{type:Boolean,default:!1},autoToggleAspectRatio:{type:Boolean,default:!1},toggleAspectRatio:{type:Boolean,default:!1},changeOnClick:{type:Boolean,default:!0},plain:{type:Boolean,default:!1},zIndex:{type:Number,default:1e4},alertOnError:{type:Boolean,default:!0},customStrings:{type:Object,default:function(){return{}}}},watch:{prefill:function(){this.prefill?this.preloadImage(this.prefill,this.prefillOptions):this.removeImage()}},data:function(){return{imageSelected:!1,previewHeight:0,previewWidth:0,draggingOver:!1,canvasWidth:0,canvasHeight:0,strings:{upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."}}},mounted:function(){var e=this;if(this.updateStrings(),this.prefill&&this.preloadImage(this.prefill,this.prefillOptions),this.$nextTick(function(){window.addEventListener("resize",e.onResize),e.onResize()}),this.supportsPreview){this.pixelRatio=Math.round(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI);var t=this.$refs.previewCanvas;t.getContext&&(this.context=t.getContext("2d"),this.context.scale(this.pixelRatio,this.pixelRatio))}"image/*"!==this.accept&&(this.fileTypes=this.accept.split(","),this.fileTypes=this.fileTypes.map(function(e){return e.trim()})),this.canvasWidth=this.width,this.canvasHeight=this.height,this.$on("error",function(t){e.alertOnError&&alert(t.msg)})},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{updateStrings:function(){for(var e in this.customStrings)e in this.strings&&"string"==typeof this.customStrings[e]&&(this.strings[e]=this.customStrings[e])},onClick:function(){if(!this.imageSelected)return void this.selectImage();this.changeOnClick&&this.selectImage(),this.$emit("click")},onResize:function(){this.resizeCanvas(),this.imageObject&&this.drawImage(this.imageObject)},onDragStart:function(){this.supportsDragAndDrop&&(this.draggingOver=!0)},onDragStop:function(){this.supportsDragAndDrop&&(this.draggingOver=!1)},onFileDrop:function(e){this.onDragStop(),this.onFileChange(e)},onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;if(t.length){if(t[0].size<=0||t[0].size>1024*this.size*1024)return void this.$emit("error",{type:"fileSize",fileSize:t[0].size,fileType:t[0].type,fileName:t[0].name,msg:this.strings.fileSize+" ("+this.size+"MB)"});if(t[0].name!==this.fileName||t[0].size!==this.fileSize||this.fileModified!==t[0].lastModified){if(this.file=t[0],this.fileName=t[0].name,this.fileSize=t[0].size,this.fileModified=t[0].lastModified,this.fileType=t[0].type,"image/*"===this.accept){if("image/"!==t[0].type.substr(0,6))return}else if(-1===this.fileTypes.indexOf(t[0].type))return void this.$emit("error",{type:"fileType",fileSize:t[0].size,fileType:t[0].type,fileName:t[0].name,msg:this.strings.fileType});this.imageSelected=!0,this.image="",this.supportsPreview?this.loadImage(t[0]):this.$emit("change")}}},loadImage:function(e){var t=this;this.getEXIFOrientation(e,function(i){t.setOrientation(i);var n=new FileReader;n.onload=function(e){t.image=e.target.result,t.$emit("change"),t.imageObject=new Image,t.imageObject.onload=function(){if(t.autoToggleAspectRatio){t.getOrientation(t.canvasWidth,t.canvasHeight)!==t.getOrientation(t.imageObject.width,t.imageObject.height)&&t.rotateCanvas()}t.drawImage(t.imageObject)},t.imageObject.src=t.image},n.readAsDataURL(e)})},drawImage:function(e){this.imageWidth=e.width,this.imageHeight=e.height,this.imageRatio=e.width/e.height;var t=0,i=0,n=this.previewWidth,a=this.previewHeight,r=this.previewWidth/this.previewHeight;this.crop?this.imageRatio>=r?(n=a*this.imageRatio,t=(this.previewWidth-n)/2):(a=n/this.imageRatio,i=(this.previewHeight-a)/2):this.imageRatio>=r?(a=n/this.imageRatio,i=(this.previewHeight-a)/2):(n=a*this.imageRatio,t=(this.previewWidth-n)/2);var s=this.$refs.previewCanvas;s.style.background="none",s.width=this.previewWidth*this.pixelRatio,s.height=this.previewHeight*this.pixelRatio,this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,s.width,s.height),this.rotate&&(this.context.translate(t*this.pixelRatio,i*this.pixelRatio),this.context.translate(n/2*this.pixelRatio,a/2*this.pixelRatio),this.context.rotate(this.rotate),t=-n/2,i=-a/2),this.context.drawImage(e,t*this.pixelRatio,i*this.pixelRatio,n*this.pixelRatio,a*this.pixelRatio)},selectImage:function(){this.$refs.fileInput.click()},removeImage:function(){this.$refs.fileInput.value="",this.$refs.fileInput.type="",this.$refs.fileInput.type="file",this.fileName="",this.fileType="",this.fileSize=0,this.fileModified=0,this.imageSelected=!1,this.image="",this.file=null,this.imageObject=null,this.$refs.previewCanvas.style.backgroundColor="rgba(200,200,200,.25)",this.$refs.previewCanvas.width=this.previewWidth*this.pixelRatio,this.$emit("remove")},rotateImage:function(){this.rotateCanvas(),this.imageObject&&this.drawImage(this.imageObject);var e=this.getOrientation(this.canvasWidth,this.canvasHeight);this.$emit("aspectratiochange",e)},resizeCanvas:function(){var e=this.canvasWidth/this.canvasHeight,t=this.$refs.container.clientWidth;(this.toggleAspectRatio||t!==this.containerWidth)&&(this.containerWidth=t,this.previewWidth=Math.min(this.containerWidth-2*this.margin,this.canvasWidth),this.previewHeight=this.previewWidth/e)},getOrientation:function(e,t){var i="square";return e>t?i="landscape":e<t&&(i="portrait"),i},switchCanvasOrientation:function(){var e=this.canvasWidth,t=this.canvasHeight;this.canvasWidth=t,this.canvasHeight=e},rotateCanvas:function(){this.switchCanvasOrientation(),this.resizeCanvas()},setOrientation:function(e){this.rotate=!1,8===e?this.rotate=-Math.PI/2:6===e?this.rotate=Math.PI/2:3===e&&(this.rotate=-Math.PI)},getEXIFOrientation:function(e,t){var i=new FileReader;i.onload=function(e){var i=new DataView(e.target.result);if(65496!==i.getUint16(0,!1))return t(-2);for(var n=i.byteLength,a=2;a<n;){var r=i.getUint16(a,!1);if(a+=2,65505===r){if(1165519206!==i.getUint32(a+=2,!1))return t(-1);var s=18761===i.getUint16(a+=6,!1);a+=i.getUint32(a+4,s);var o=i.getUint16(a,s);a+=2;for(var l=0;l<o;l++)if(274===i.getUint16(a+12*l,s))return t(i.getUint16(a+12*l+8,s))}else{if(65280!=(65280&r))break;a+=i.getUint16(a,!1)}}return t(-1)},i.readAsArrayBuffer(e.slice(0,65536))},preloadImage:function(e,t){var i=this;if(t=s()({},t),"object"===(void 0===e?"undefined":a()(e)))return this.imageSelected=!0,this.image="",void(this.supportsPreview?this.loadImage(e):this.$emit("change"));var n=new Headers;n.append("Accept","image/*"),fetch(e,{method:"GET",mode:"cors",headers:n}).then(function(e){return e.blob()}).then(function(n){var a={target:{files:[]}},r=t.fileName||e.split("/").slice(-1)[0],s=t.mediaType||"image/"+(t.fileType||r.split(".").slice(-1)[0]);s=s.replace("jpg","jpeg"),a.target.files[0]=new File([n],r,{type:s}),i.onFileChange(a)}).catch(function(e){console.log("Failed loading prefill image: "+e.message)})}},computed:{supportsUpload:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var e=document.createElement("input");return e.type="file",!e.disabled},supportsPreview:function(){return window.FileReader&&!!window.CanvasRenderingContext2D},supportsDragAndDrop:function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.msMaxTouchPoints)},computedClasses:function(){var e={};return e["dragging-over"]=this.draggingOver,e},fontSize:function(){return Math.min(.04*this.previewWidth,21)+"px"}}}},292:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(391),a=i.n(n);t.default={name:"app",data:function(){return{}},components:{PictureInput:a.a},methods:{onChange:function(){console.log("New picture selected!"),this.$refs.pictureInput.image?console.log("Picture loaded."):console.log("FileReader API not supported: use the <form>, Luke!")}}}},294:function(e,t,i){e.exports={default:i(296),__esModule:!0}},296:function(e,t,i){i(299),e.exports=9007199254740991},299:function(e,t,i){var n=i(13);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},305:function(e,t,i){t=e.exports=i(188)(!0),t.push([e.i,".picture-input[data-v-2e190c08]{width:100%;margin:0 auto;text-align:center}.preview-container[data-v-2e190c08]{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;cursor:pointer;overflow:hidden}.picture-preview[data-v-2e190c08]{width:100%;height:100%;position:relative;z-index:10001;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:hsla(0,0%,78%,.25)}.picture-preview.dragging-over[data-v-2e190c08]{-webkit-filter:brightness(.5);filter:brightness(.5)}.picture-inner[data-v-2e190c08]{position:relative;z-index:10002;pointer-events:none;-webkit-box-sizing:border-box;box-sizing:border-box;margin:1em auto;padding:.5em;border:.3em dashed rgba(66,66,66,.15);border-radius:8px;width:calc(100% - 2.5em);height:calc(100% - 2.5em);display:table}.picture-inner .picture-inner-text[data-v-2e190c08]{display:table-cell;vertical-align:middle;text-align:center;font-size:2em;line-height:1.5}button[data-v-2e190c08]{margin:1em .25em;cursor:pointer}input[type=file][data-v-2e190c08]{display:none}","",{version:3,sources:["C:/Users/Administrator/Desktop/我的项目/vue2.0-demos/node_modules/vue-picture-input/PictureInput.vue"],names:[],mappings:"AACA,gCACE,WAAY,AACZ,cAAe,AACf,iBAAmB,CACpB,AACD,oCACE,WAAY,AACZ,8BAA+B,AACvB,sBAAuB,AAC/B,cAAe,AACf,eAAgB,AAChB,eAAiB,CAClB,AACD,kCACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,cAAe,AACf,8BAA+B,AACvB,sBAAuB,AAC/B,mCAAwC,CACzC,AACD,gDACE,8BAAgC,AACxB,qBAAwB,CACjC,AACD,gCACE,kBAAmB,AACnB,cAAe,AACf,oBAAqB,AACrB,8BAA+B,AACvB,sBAAuB,AAC/B,gBAAiB,AACjB,aAAe,AACf,sCAAuC,AACvC,kBAAmB,AACnB,yBAA0B,AAC1B,0BAA2B,AAC3B,aAAe,CAChB,AACD,oDACE,mBAAoB,AACpB,sBAAuB,AACvB,kBAAmB,AACnB,cAAe,AACf,eAAiB,CAClB,AACD,wBACE,iBAAkB,AAClB,cAAgB,CACjB,AACD,kCACE,YAAc,CACf",file:"PictureInput.vue",sourcesContent:["\n.picture-input[data-v-2e190c08] {\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n}\n.preview-container[data-v-2e190c08] {\n  width: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  margin: 0 auto;\n  cursor: pointer;\n  overflow: hidden;\n}\n.picture-preview[data-v-2e190c08] {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  z-index: 10001;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background-color: rgba(200,200,200,.25);\n}\n.picture-preview.dragging-over[data-v-2e190c08] {\n  -webkit-filter: brightness(0.5);\n          filter: brightness(0.5);\n}\n.picture-inner[data-v-2e190c08] {\n  position: relative;\n  z-index: 10002;\n  pointer-events: none;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  margin: 1em auto;\n  padding: 0.5em;\n  border: .3em dashed rgba(66,66,66,.15);\n  border-radius: 8px;\n  width: calc(100% - 2.5em);\n  height: calc(100% - 2.5em);\n  display: table;\n}\n.picture-inner .picture-inner-text[data-v-2e190c08] {\n  display: table-cell;\n  vertical-align: middle;\n  text-align: center;\n  font-size: 2em;\n  line-height: 1.5;\n}\nbutton[data-v-2e190c08] {\n  margin: 1em .25em;\n  cursor: pointer;\n}\ninput[type=file][data-v-2e190c08] {\n  display: none;\n}\n"],sourceRoot:""}])},311:function(e,t,i){t=e.exports=i(188)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"uploadImg.vue",sourceRoot:""}])},377:function(e,t,i){var n=i(305);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(189)("34874c08",n,!0)},383:function(e,t,i){var n=i(311);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(189)("a4658f5e",n,!0)},391:function(e,t,i){function n(e){i(377)}var a=i(30)(i(278),i(396),n,"data-v-2e190c08",null);e.exports=a.exports},396:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"picture-input",attrs:{id:"picture-input"}},[e.supportsUpload?e.supportsPreview?i("div",[i("div",{staticClass:"preview-container",style:{maxWidth:e.previewWidth+"px",height:e.previewHeight+"px",borderRadius:e.radius+"%"}},[i("canvas",{ref:"previewCanvas",staticClass:"picture-preview",class:e.computedClasses,style:{height:e.previewHeight+"px",zIndex:e.zIndex+1},on:{drag:function(e){e.stopPropagation(),e.preventDefault()},dragover:function(e){e.stopPropagation(),e.preventDefault()},dragstart:function(t){t.stopPropagation(),t.preventDefault(),e.onDragStart(t)},dragenter:function(t){t.stopPropagation(),t.preventDefault(),e.onDragStart(t)},dragend:function(t){t.stopPropagation(),t.preventDefault(),e.onDragStop(t)},dragleave:function(t){t.stopPropagation(),t.preventDefault(),e.onDragStop(t)},drop:function(t){t.stopPropagation(),t.preventDefault(),e.onFileDrop(t)},click:function(t){t.preventDefault(),e.onClick(t)}}}),e._v(" "),e.imageSelected||e.plain?e._e():i("div",{staticClass:"picture-inner",style:{top:-e.previewHeight+"px",marginBottom:-e.previewHeight+"px",fontSize:e.fontSize,borderRadius:e.radius+"%",zIndex:e.zIndex+2}},[e.supportsDragAndDrop?i("span",{staticClass:"picture-inner-text",domProps:{innerHTML:e._s(e.strings.drag)}}):i("span",{staticClass:"picture-inner-text",domProps:{innerHTML:e._s(e.strings.tap)}})])]),e._v(" "),e.imageSelected&&!e.hideChangeButton?i("button",{class:e.buttonClass,on:{click:function(t){t.preventDefault(),e.selectImage(t)}}},[e._v(e._s(e.strings.change))]):e._e(),e._v(" "),e.imageSelected&&e.removable?i("button",{class:e.removeButtonClass,on:{click:function(t){t.preventDefault(),e.removeImage(t)}}},[e._v(e._s(e.strings.remove))]):e._e(),e._v(" "),e.imageSelected&&e.toggleAspectRatio&&e.width!==e.height?i("button",{class:e.aspectButtonClass,on:{click:function(t){t.preventDefault(),e.rotateImage(t)}}},[e._v(e._s(e.strings.aspect))]):e._e()]):i("div",[e.imageSelected?i("div",[i("div",{domProps:{innerHTML:e._s(e.strings.selected)}}),e._v(" "),e.hideChangeButton?e._e():i("button",{class:e.buttonClass,on:{click:function(t){t.preventDefault(),e.selectImage(t)}}},[e._v(e._s(e.strings.change))]),e._v(" "),e.removable?i("button",{class:e.removeButtonClass,on:{click:function(t){t.preventDefault(),e.removeImage(t)}}},[e._v(e._s(e.strings.remove))]):e._e()]):i("button",{class:e.buttonClass,on:{click:function(t){t.preventDefault(),e.selectImage(t)}}},[e._v(e._s(e.strings.select))])]):i("div",{domProps:{innerHTML:e._s(e.strings.upload)}}),e._v(" "),i("input",{ref:"fileInput",attrs:{type:"file",name:e.name,id:e.id,accept:e.accept},on:{change:e.onFileChange}})])},staticRenderFns:[]}},404:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("mt-header",{attrs:{title:"图片预览"}},[i("router-link",{attrs:{slot:"left",to:"/index"},slot:"left"},[i("mt-button",{attrs:{icon:"back"}},[e._v("返回")])],1),e._v(" "),i("mt-button",{attrs:{slot:"right",icon:"more"},slot:"right"})],1),e._v(" "),i("div",{staticClass:"hello"},[i("picture-input",{ref:"pictureInput",attrs:{width:"600",height:"600",margin:"16",accept:"image/jpeg,image/png",size:"10",buttonClass:"btn",customStrings:{upload:"<h1>Bummer!</h1>",drag:"Drag a 😺 GIF or GTFO"}},on:{change:e.onChange}})],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=2.d7ea7cf4ebafa58ba53f.js.map